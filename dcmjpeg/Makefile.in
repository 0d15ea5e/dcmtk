#
#	Makefile for dcmpstat
#


@SET_MAKE@

SHELL = /bin/sh
VPATH= @srcdir@:@top_srcdir@/include:@configdir@/include
srcdir= @srcdir@
top_srcdir=@top_srcdir@
include @configdir@/@common_makefile@


all: include-all libsrc-all apps-all docs-all

install: install-bin

install-bin: apps-install

install-lib: libsrc-install-lib install-include

install-include: include-install

install-support:

include-all:
	(cd include; $(MAKE) ARCH="$(ARCH)" all)

libsrc-all: include-all
	(cd libijg8; $(MAKE) ARCH="$(ARCH)" all)
	(cd libijg12; $(MAKE) ARCH="$(ARCH)" all)
	(cd libijg16; $(MAKE) ARCH="$(ARCH)" all)
	(cd libsrc; $(MAKE) ARCH="$(ARCH)" all)

apps-all: libsrc-all
	(cd apps; $(MAKE) ARCH="$(ARCH)" all)

docs-all:
	(cd docs; $(MAKE) all)

include-install:
	(cd include; $(MAKE) ARCH="$(ARCH)" install)

libsrc-install-lib: include-all
	(cd libijg8; $(MAKE) ARCH="$(ARCH)" install)
	(cd libijg12; $(MAKE) ARCH="$(ARCH)" install)
	(cd libijg16; $(MAKE) ARCH="$(ARCH)" install)
	(cd libsrc; $(MAKE) ARCH="$(ARCH)" install)

apps-install: libsrc-all
	(cd apps; $(MAKE) ARCH="$(ARCH)" install)

docs-install:
	(cd docs; $(MAKE) install)

clean:
	(cd include; $(MAKE) clean)
	(cd libijg8; $(MAKE) clean)
	(cd libijg12; $(MAKE) clean)
	(cd libijg16; $(MAKE) clean)
	(cd libsrc; $(MAKE) clean)
	(cd apps; $(MAKE) clean)
	(cd docs; $(MAKE) clean)
	(cd htmldocs; $(MAKE) clean)
	rm -f $(TRASH)

distclean:
	(cd include; $(MAKE) distclean)
	(cd libijg8; $(MAKE) distclean)
	(cd libijg12; $(MAKE) distclean)
	(cd libijg16; $(MAKE) distclean)
	(cd libsrc; $(MAKE) distclean)
	(cd apps; $(MAKE) distclean)
	(cd docs; $(MAKE) distclean)
	(cd htmldocs; $(MAKE) distclean)
	rm -f $(DISTTRASH)

dependencies:
	(cd libijg8; touch $(DEP); $(MAKE) dependencies)
	(cd libijg12; touch $(DEP); $(MAKE) dependencies)
	(cd libijg16; touch $(DEP); $(MAKE) dependencies)
	(cd libsrc; touch $(DEP); $(MAKE) dependencies)
	(cd apps; touch $(DEP); $(MAKE) dependencies)

html:
	(doc++ -d htmldocs -p -B /dev/null include/*.h libsrc/*.cc apps/*.h apps/*.cc)


