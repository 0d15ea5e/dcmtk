
NAME

   dcmmklut


SYNOPSIS

   dcmmklut [options] dcmimg-out


SUMMARY

The dcmmklut utility allows to create a variety of DICOM Modality,
Presentation and VOI look-up tables (LUT) and is intended for the creation
of test images.  The utility is able to read an existing DICOM image file,
create a look up table according to the command line options, and write
the new object back to file.  It is also possible to create a new object
containing the specified LUT without reading an existing DICOM image file.
This is e.g. useful to simply store different look-up tables in a DICOM-like
structure.
As a default the output file is encoded with the same transfer syntax used
for the input file, but the transfer syntax can also be specified as a
command line option.
The LUT data can be derived from the shape of a gamma curve (default for the
gamma factor is 1) or imported from a file (currently the MAP format from
Ulead's PhotoImpact and a simple text format are supported).  The input and
output width of the LUT can also be specified in the range allowed by the
DICOM standard.  The interpolation of the input range is done by a polynomial
curve fitting algorithm.
In addition to the DICOM output file the LUT data can also be exported to a
tabbed text file which allows the easy visualization of the curves with a
common spread sheet application (e.g. Microsoft Excel).


USAGE

dcmmklut: Create DICOM look-up tables
usage: dcmmklut [options] dcmimg-out

parameters:
  dcmimg-out             DICOM output filename

general options:
  -h     --help          print this help text and exit
         --version       print version information and exit
  -v     --verbose       verbose mode, print processing details
  -d     --debug         debug mode, print debug information
LUT creation options:
  LUT type:
    +Tm  --modality      create as Modality LUT
    +Tp  --presentation  create as Presentation LUT
    +Tv  --voi           create as VOI LUT (default)
  LUT placement:
    +Pa  --add           add to existing transform (def. for and only with +Tv)
    +Pr  --replace       replace existing transform (default for +Tm and +Tp)
  LUT content:
    +Cg  --gamma         [g]amma : float
                         use gamma value (default: 1.0)
    +Cm  --map-file      [f]ilename : string
                         read input data from MAP file
    +Ct  --text-file     [f]ilename : string
                         read input data from text file
  LUT options:
    +Og  --inverse-gsdf  apply inverse GSDF (print presentation LUT in OD)
         --min-density   [v]alue : integer (0..65535, default: 20)
                         set min density to v (in hundreds of OD)
         --max-density   [v]alue : integer (0..65535, default: 300)
                         set max density to v (in hundreds of OD)
    +Oi  --illumination  [v]alue : integer (0..65535, default: 2000)
                         set illumination to v (in cd/m^2)
    +Or  --reflection    [v]alue : integer (0..65535, default: 10)
                         set reflected ambient light to v (in cd/m^2)
  LUT structure:
    -b   --bits          [n]umber : integer
                         create LUT with n bit values (8..16, default: 16)
    -e   --entries       [n]umber : integer
                         create LUT with n entries (1..65536, default: 256)
    -f   --first-mapped  [n]umber : integer
                         first input value mapped (-31768..65535, default: 0)
    -r   --random        [n]umber : unsigned integer
                         perform n randomly selected permutations on the LUT
    -rs  --random-seed   [n]umber : unsigned integer
                         initialise the random-number generator with n
                         (default: 0, for reproduceable results)
    -o   --order         [n]umber : integer
                         use polynomial curve fitting algorithm with order n
                         (0..99, default: 5)
    -E   --explanation   [n]ame : string
                         LUT explanation (default: automatically created)
    -a   --byte-align    create byte-aligned LUT (implies -b 8)
  LUT data VR:
    +Dw  --data-ow       write LUT Data as OW (default)
    +Du  --data-us       write LUT Data as US
    +Ds  --data-ss       write LUT Data as SS (minimal support)
file options:
  +Fi    --dicom-input   [f]ilename : string
                         read dataset from DICOM file f
  +Fo    --text-output   [f]ilename : string
                         write LUT data to tabbed text file f


ENVIRONMENT

The dcmmklut application will attempt to load DICOM data dictionaries
specified in the DCMDICTPATH environment variable.  By default, if
the DCMDICTPATH environment variable is not set, the file
/usr/local/dicom/lib/dicom.dic will be loaded.  The default behaviour
should be preferred and the DCMDICTPATH environment variable only used
when alternative data dictionaries are required.  The DCMDICTPATH
environment variable has the same format as the shell PATH variable in
that a colon (":") separates entries.  The data dictionary code will
attempt to load each file specified in the DCMDICTPATH environment
variable.  It is an error if no data dictionary can be loaded.
